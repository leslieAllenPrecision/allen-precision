<?xml version="1.0"?>
<odoo>
	<data>
		<record id="view_google_feed_config_form" model="ir.ui.view">
			<field name="name">google.feed.config.view</field>
			<field name="model">google.feed.config</field>
			<field name="arch" type="xml">
				<form string="Google Feed Configuration">
					<header>
						<button name="add_to_google_feed" string="Generate Feed" type="object" class="oe_highlight" attrs="{'invisible':[('auto_generate','=','byschedule')]}"/>
					</header>
					<sheet>
						<group>
							<group>
								<field name="name" required="1"/>
								<field name="auto_generate"/>	
								<field name="product_pricelist_id"/>							
							</group>
							<group>
									<label for="file_name" string="File Name" required="1"/>
						        <div class="o_row">
						        		<field name="file_name" required="1"/>
						            <span style="margin-left:10px;">
						                <field name="file_type" required="1"/>
						            </span>
						        </div>
									<field name="feed_file" filename="file_name" widget="download_link" readonly="1"/>
							</group>
						</group>
						<notebook>
							<page string="Field Mapping" name="field_mapping_info">
								<group>
									<group>
										<field name="product_g_id" options="{'no_create': True, 'no_open': True}" required="1" domain="[('model_id','=','product.template'),('ttype','not in',['many2many','one2many'])]"/>
										<field name="title" options="{'no_create': True, 'no_open': True}" required="1" domain="[('model_id','=','product.template'),('ttype','not in',['many2many','one2many'])]"/>
										<field name="description" options="{'no_create': True, 'no_open': True}"  required="1" domain="[('model_id','=','product.template')],('ttype','not in',['many2many','one2many'])"/>
										<field name="condition" required="1" />
									</group>
									<group>
										<field name="gtin" options="{'no_create': True, 'no_open': True}"  required="1" domain="[('model_id','=','product.template'),('ttype','not in',['many2many','one2many'])]"/>
										<field name="brand" options="{'no_create': True, 'no_open': True}"  required="1" domain="[('model_id','=','product.template'),('ttype','not in',['many2many','one2many'])]"/>
										<field name="mpn" options="{'no_create': True, 'no_open': True}"  required="1" domain="[('model_id','=','product.template'),('ttype','not in',['many2many','one2many'])]"/>
									</group>
								</group>	
							</page>
							<page string="Feed Configuration" name="feed_configuration">
								<group>
									<group>
										<field name="is_add_all_products"/>
									</group>
									<group>
										<field name="exclude_out_of_stock_products"/>
									</group>
								</group>
								<group string="Select Products" attrs="{'invisible':[('is_add_all_products', '=', True)]}">
									<field name="product_ids" nolabel="1"/>
								</group>
							</page>
							<page string="Server Configuration" name="Server_congiguration">
								<group>
									<field name="is_upload_to_server" />
								</group>
								<group attrs="{'invisible':[('is_upload_to_server','=',False)]}">
									<group>
										<field name="server_id" attrs="{'required':[('is_upload_to_server', '=', True)]}"/>
									</group>
									<group>
										<field name="server_path" attrs="{'required':[('is_upload_to_server', '=', True)]}"/>
									</group>
								</group>
							</page>
							<page string="Cron Schedule" name="cron_schedule" attrs="{'invisible':[('auto_generate','=',False)]}">
								<group>
									<group>
										<label for="interval_number" string="Execute Every"/>
						            <div class="o_row">
						                <field name="interval_number" attrs="{'required':[('auto_generate','=',True)]}"/>
						                <span style="margin-left:10px;">
						                  	<field name="interval_type" attrs="{'required':[('auto_generate','=',True)]}"/>
						                </span>
						            </div>
									</group>
									<group>
										<field name="next_execution_time"/>
									</group>	
								</group>
							</page>
							<page string="Log History" name="error_history_info">
								<group>
									<field name="error_log_ids" nolabel="1">
										<tree string="Error Message" create="0" edit="0" editable="bottom">
											<field name="id"/>
											<field name="feed_id"/>										
											<field name="error_datetime"/>
											<field name="product_id"/>
											<field name="error_message"/>
										</tree>										
									</field>
								</group>
							</page>
						</notebook>
					</sheet>
				</form>
			</field>
		</record>
		<record model="ir.ui.view" id="view_google_feed_config_tree">
			<field name="name">google.feed.config.tree</field>
			<field name="model">google.feed.config</field>
			<field name="arch" type="xml">
				<tree>
					<field name="name"/>
					<field name="file_name"/>
					<field name="exclude_out_of_stock_products"/>
					<field name="is_upload_to_server"/>
					<field name="auto_generate"/>
					<field name="product_pricelist_id"/>
				</tree>
			</field>
		</record>
		<record id="action_google_feed_config" model="ir.actions.act_window">
			<field name="name">Google Feed Configuration</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">google.feed.config</field>
			<field name="view_mode">tree,form</field>
		</record>
		<menuitem 
			id="google_feed_config_id" 
			name="Google Feed"
			parent="base.menu_administration"/>
		<menuitem
			id="menu_google_feed_config"
			action="action_google_feed_config"
			name="Google Feed Configuration" 	
			parent="google_feed_config_id" 	
			sequence="1"/>
	</data>
</odoo>
